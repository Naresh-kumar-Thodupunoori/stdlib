'use strict';

// MODULES //

var isAccessorArray = require( '@stdlib/array/base/assert/is-accessor-array' );
var accessorGetter = require( '@stdlib/array/base/accessor-getter' );

// MAIN //

/**
 * Cumulatively tests whether no array elements pass a test implemented by a predicate function.
 *
 * @param {Array|TypedArray} x - input array
 * @param {Function} predicate - predicate function
 * @returns {Array} output array
 *
 * @example
 * function isPositive( value ) {
 *     return ( value > 0 );
 * }
 *
 * var x = [ 0, 0, 0, 1, 0 ];
 *
 * var y = cunoneBy( x, isPositive );
 * // returns [ true, true, true, false, false ]
 */
function cunoneBy( x, predicate ) {
    var getter;
    var out;
    var i;

    if ( isAccessorArray( x ) ) {
        getter = accessorGetter( x );
    }

    out = new Array( x.length );
    
    for ( i = 0; i < x.length; i++ ) {
        if ( i === 0 ) {
            out[ i ] = !predicate( getter ? getter( x, i ) : x[ i ] );
        } else {
            out[ i ] = out[ i - 1 ] && !predicate( getter ? getter( x, i ) : x[ i ] );
        }
    }
    return out;
}

// EXPORTS //

module.exports = cunoneBy;